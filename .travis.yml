language: node_js
node_js:
  - "0.10"
services:
  - postgresql
addons:
  postgresql: "9.3"
notifications:
  email: false
script:
  - npm run syntax
  - npm test
before_script:
  - psql -c 'create database capstone2_test;' -U postgres
  - cd test/scripts; ./create-db.sh capstone2_test; cd ../..;
after_script:
  - npm run coveralls
env:
  global:
    - DATABASE_URL=postgres://postgres@localhost/capstone2_test
    - AWS_BUCKET=zoe-capstone2-test
    # AWS_SECRET_ACCESS_KEY
    - secure: "E2leTZ0OWUbstlUk2k4nqIaOsR948zn1oK432lXaWyDpTWVshsp27t6May+D7kxtGIWjWWMUZ4NPYbBsDG6xGk2SSCBFHnoKS7ilX8NgtXKQpD2pc7rSkw4HGW88RUZSxYL8QM6jbZw6kA+8pgA6TL/hOSm1CpK3pAXwbMAJQUQ="
    # AWS_ACCESS_KEY_ID
    - secure: "rsYFMsyFKQKVEz1N16vNcUjHAUpDffISfIJuXD2uKznePucMGQIxkRGajMoNQzxnUJ9ONznd0z2To03/1d3VRpz6ITsdsiHdJ4jq+tCVI7E2ZI8dzHX0iwD6An2U3F7DG46tYXxLGSSRMTZZhIq+piG/b0PPG5f8VqZFqYvIozI="